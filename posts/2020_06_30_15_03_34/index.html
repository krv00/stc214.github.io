<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="http://stc214.github.io/css/frameworks.css" />
    <link crossorigin="anonymous" media="all" rel="stylesheet" href="http://stc214.github.io/css/github.css" />
    
    <link crossorigin="anonymous" media="(prefers-color-scheme: dark)" rel="stylesheet"
        href="http://stc214.github.io/css/dark.css" />
    
    <meta name="viewport" content="width=device-width">
    <meta name="description"
        content="处理大规模数据集时，需要等待的时间有时会很久，为了能充分利用晚上时间，发现 Ubuntu 的 crontab 服务是可以定时执行任务的.
 crontab 服务启动  Ubuntu 16.04 默认有 cron，如果没有，则进行安装：
sudo apt install cron
查看 cron 服务是否启动：
pgrep cron
若输出了pid，如 883，则 cron 服务已启动.
若没有任何输出，则cron服务未启动，需手工启动：
service cron start
crontab 命令说明  cron 的任务计划保存在 /etc/crontab 文件中，文件内容如：
/etc/crontab: system-wide crontab Unlike any other crontab you don&amp;rsquo;t have to run the `crontab&amp;rsquo; command to install the new version when you edit this file and files in /etc/cron.d. These files also have username fields, that none of the other crontabs do." />
    <meta name="keywords"
        content="" />
    <meta name="robots" content="noodp" />
    <link rel="canonical" href="http://stc214.github.io/posts/2020_06_30_15_03_34/" />

    
    <meta name="twitter:card" content="summary" />
    <meta name="twitter:title" content="Ubuntu - crontab 命令定时执行任务 - STC214" />
    <meta name="twitter:description"
        content="处理大规模数据集时，需要等待的时间有时会很久，为了能充分利用晚上时间，发现 Ubuntu 的 crontab 服务是可以定时执行任务的.
 crontab 服务启动  Ubuntu 16.04 默认有 cron，如果没有，则进行安装：
sudo apt install cron
查看 cron 服务是否启动：
pgrep cron
若输出了pid，如 883，则 cron 服务已启动.
若没有任何输出，则cron服务未启动，需手工启动：
service cron start
crontab 命令说明  cron 的任务计划保存在 /etc/crontab 文件中，文件内容如：
/etc/crontab: system-wide crontab Unlike any other crontab you don&amp;rsquo;t have to run the `crontab&amp;rsquo; command to install the new version when you edit this file and files in /etc/cron.d. These files also have username fields, that none of the other crontabs do." />
    <meta name="twitter:site" content="http://stc214.github.io/" />
    <meta name="twitter:creator" content="" />
    <meta name="twitter:image"
        content="http://stc214.github.io/">

    
    <meta property="og:type" content="article" />
    <meta property="og:title" content="Ubuntu - crontab 命令定时执行任务 - STC214">
    <meta property="og:description"
        content="处理大规模数据集时，需要等待的时间有时会很久，为了能充分利用晚上时间，发现 Ubuntu 的 crontab 服务是可以定时执行任务的.
 crontab 服务启动  Ubuntu 16.04 默认有 cron，如果没有，则进行安装：
sudo apt install cron
查看 cron 服务是否启动：
pgrep cron
若输出了pid，如 883，则 cron 服务已启动.
若没有任何输出，则cron服务未启动，需手工启动：
service cron start
crontab 命令说明  cron 的任务计划保存在 /etc/crontab 文件中，文件内容如：
/etc/crontab: system-wide crontab Unlike any other crontab you don&amp;rsquo;t have to run the `crontab&amp;rsquo; command to install the new version when you edit this file and files in /etc/cron.d. These files also have username fields, that none of the other crontabs do." />
    <meta property="og:url" content="http://stc214.github.io/posts/2020_06_30_15_03_34/" />
    <meta property="og:site_name" content="Ubuntu - crontab 命令定时执行任务" />
    <meta property="og:image"
        content="http://stc214.github.io/">
    <meta property="og:image:width" content="2048">
    <meta property="og:image:height" content="1024">
    
    <meta property="article:published_time" content="2020-06-30 15:03:37 &#43;0800 CST" />
    

    
    

    
    

    <title>Ubuntu - crontab 命令定时执行任务 - STC214</title>

    <link rel="icon" type="image/x-icon" class="js-site-favicon" href="http://stc214.github.io/images/favicon.ico">
    <meta name="theme-color" content="#1e2327">

    
    

    
</head>

<body class="env-production emoji-size-boost page-responsive page-profile">
  <div class="position-relative js-header-wrapper ">
    <span class="Progress progress-pjax-loader position-fixed width-full js-pjax-loader-bar">
        <span class="progress-pjax-loader-bar top-0 left-0" style="width: 0%;"></span>
    </span>
    <header class="Header py-lg-0 js-details-container Details flex-wrap flex-lg-nowrap p-responsive" role="banner">
        <div class="Header-item d-none d-lg-flex">
            <a class="Header-link" href="http://stc214.github.io/" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div
            class="Header-item Header-item--full flex-column flex-lg-row width-full flex-order-2 flex-lg-order-none mr-0 mr-lg-3 mt-3 mt-lg-0 Details-content--hidden">
            <div class="header-search flex-self-stretch flex-lg-self-auto mr-0 mr-lg-3 mb-3 mb-lg-0 scoped-search site-scoped-search js-site-search position-relative js-jump-to"
                role="combobox" aria-owns="jump-to-results" aria-label="Search or jump to" aria-haspopup="listbox"
                aria-expanded="false">
                <div class="position-relative">
                </div>
            </div>
        </div>
        <nav class="d-flex" aria-label="Global">
            <a class="js-selected-navigation-item Header-link py-lg-3">&nbsp;</a>
        </nav>
        <div class="Header-item Header-item--full flex-justify-center d-lg-none position-relative" style="margin-right: auto;">
            <a class="Header-link" href="http://stc214.github.io/" aria-label="Homepage"
                data-ga-click="Header, go to dashboard, icon:logo">
                <svg class="octicon octicon-mark-github v-align-middle" height="32" viewBox="0 0 16 16" version="1.1"
                    width="32" aria-hidden="true">
                    <path fill-rule="evenodd"
                        d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z" />
                </svg>
            </a>
        </div>
        <div class="Header-item position-relative mr-0 d-none d-lg-flex">
            <details class="details-overlay details-reset">
                <summary class="Header-link" aria-label="View profile and more"
                    data-ga-click="Header, show menu, icon:avatar">
                    
                    <img alt="" class="avatar" src="http://stc214.github.io/images/avatar.png" height="20" width="20">
                    
                </summary>
            </details>
        </div>
    </header>
</div>

<div id="start-of-content" class="show-on-focus"></div>
<div id="js-flash-container">
</div>

  
<div class="application-main " data-commit-hovercards-enabled="">
    <div itemscope="" itemtype="http://schema.org/SoftwareSourceCode" class="">
        <main>
            <div class="pagehead repohead instapaper_ignore readability-menu experiment-repo-nav pt-0 pt-lg-4 ">
                <div class="repohead-details-container clearfix container-lg p-responsive d-none d-lg-block">
                    <div class="mb-3 d-flex">
                        <h1 class="public css-truncate float-none flex-auto width-fit pl-0">
                            <a class="avatar mr-1" href="http://stc214.github.io/about/">
                                
                                <img src="http://stc214.github.io/images/avatar.png" width="26" height="26">
                                
                            </a>
                            <span class="author"><a href="http://stc214.github.io/"></a></span>
                            <span class="path-divider">/</span>
                            <strong itemprop="name" class="css-truncate-target" style="max-width: 410px"><a
                                    href="http://stc214.github.io/posts/2020_06_30_15_03_34/">Ubuntu - crontab 命令定时执行任务</a></strong>

                            <div class="d-block text-small text-gray">
                                Created <time-ago datetime="2020-06-30" class="no-wrap"
                                    title="Created at 2020/06/30">
                                    2020-06-30</time-ago>
                                <span class="file-info-divider"></span>
                                Modified <time-ago datetime="2020-06-30" class="no-wrap"
                                    title="Modified  at 2020/06/30">
                                    2020-06-30</time-ago>
                            </div>
                        </h1>
                    </div>
                </div>




            </div>
            <div class="container-lg clearfix new-discussion-timeline experiment-repo-nav  p-responsive">
                <div class="repository-content ">
                    <div class="Box mt-3 position-relative">
                        <div class="Box-header py-2 d-flex flex-column flex-shrink-0 flex-md-row flex-md-items-center">
                            <div class="text-mono f6 flex-auto pr-3 flex-order-2 flex-md-order-1 mt-2 mt-md-0">
                                1004 Words
                                
                            </div>
                        </div>

                        <div id="readme" class="Box-body readme blob instapaper_body js-code-block-container">
                            <article class="markdown-body entry-content p-3 p-md-6" itemprop="text"><p>处理大规模数据集时，需要等待的时间有时会很久，为了能充分利用晚上时间，发现 Ubuntu 的 crontab 服务是可以定时执行任务的.</p>
<ol>
<li>crontab 服务启动</li>
</ol>
<p>Ubuntu 16.04 默认有 cron，如果没有，则进行安装：</p>
<p>sudo apt install cron</p>
<p>查看 cron 服务是否启动：</p>
<p>pgrep cron</p>
<p>若输出了pid，如 883，则 cron 服务已启动.</p>
<p>若没有任何输出，则cron服务未启动，需手工启动：</p>
<p>service cron start</p>
<ol start="2">
<li>crontab 命令说明</li>
</ol>
<p>cron 的任务计划保存在 /etc/crontab 文件中，文件内容如：</p>
<h1 id="etccrontab-system-wide-crontab">/etc/crontab: system-wide crontab</h1>
<h1 id="unlike-any-other-crontab-you-dont-have-to-run-the-crontab">Unlike any other crontab you don&rsquo;t have to run the `crontab&rsquo;</h1>
<h1 id="command-to-install-the-new-version-when-you-edit-this-file">command to install the new version when you edit this file</h1>
<h1 id="and-files-in-etccrond-these-files-also-have-username-fields">and files in /etc/cron.d. These files also have username fields,</h1>
<h1 id="that-none-of-the-other-crontabs-do">that none of the other crontabs do.</h1>
<p>SHELL=/bin/sh
PATH=/usr/local/sbin:/usr/local/bin:/sbin:/bin:/usr/sbin:/usr/bin</p>
<h1 id="m-h-dom-mon-dow-user--command">m h dom mon dow user  command</h1>
<p>17 *    * * *   root    cd / &amp;&amp; run-parts &ndash;report /etc/cron.hourly
25 6    * * *   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts &ndash;report /etc/cron.daily )
47 6    * * 7   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts &ndash;report /etc/cron.weekly )
52 6    1 * *   root    test -x /usr/sbin/anacron || ( cd / &amp;&amp; run-parts &ndash;report /etc/cron.monthly )</p>
<h1 id="heading"></h1>
<p>可以通过 crontab命令进行任务管理：</p>
<h1 id="编辑用户username-的计划任务文件">编辑用户username 的计划任务文件</h1>
<p>crontab -u username -e</p>
<h1 id="显示某个用户的计划任务文件-默认为当前用户">显示某个用户的计划任务文件; 默认为当前用户</h1>
<p>crontab -l
crontab -u username -l</p>
<h1 id="设置定时任务-编辑某个用户的计划任务文件默认为当前用户">设置定时任务, 编辑某个用户的计划任务文件；默认为当前用户</h1>
<p>crontab -e</p>
<h1 id="删除某个用户的计划任务文件默认为当前用户">删除某个用户的计划任务文件；默认为当前用户</h1>
<p>crontab -r</p>
<ol start="3">
<li>添加任务计划</li>
</ol>
<p>进入 crontab编辑模式：</p>
<p>crontab -e</p>
<p>进行任务添加.</p>
<p>也可以直接编辑 /etc/crontab 文件，在尾部添加计划任务.</p>
<p>crontab 任务计划的语法格式：</p>
<h1 id="m-h-dom-mon-dow-user-command">m h dom mon dow user command</h1>
<h1 id="分时日月周-用户名-计划任务命令">分　时　日　月　周 用户名 计划任务命令</h1>
<p>17 *    * * *   root    cd / &amp;&amp; run-parts &ndash;report /etc/cron.hourly</p>
<h1 id="第1列---分钟159-每分钟用--或者-1-表示">第1列 - 分钟1～59 每分钟用 * 或者 */1 表示</h1>
<h1 id="第2列---小时1230表示0点">第2列 - 小时1～23（0表示0点）</h1>
<h1 id="第3列---日期131">第3列 - 日期1～31</h1>
<h1 id="第4列---月份112">第4列 - 月份1～12</h1>
<h1 id="第5列---星期060表示星期天">第5列 - 星期0～6（0表示星期天）</h1>
<h1 id="第6列---用户名">第6列 - 用户名</h1>
<h1 id="第7列---计划执行的任务命令">第7列 - 计划执行的任务命令</h1>
<p>其中，使用run-parts 运行指定目录下的所有脚本.(编辑的脚本必须包含 #!/bin/bash). 如：</p>
<h1 id="每天-2330-运行-homemy_scripts-目录下的所有脚本">每天 23:30 运行 /home/my_scripts/ 目录下的所有脚本</h1>
<p>30 23 * * * run-parts /home/my_scripts/</p>
<p>更多计划设置，如：</p>
<h1 id="每晚的-2230-执行-cd-homeusername">每晚的 22:30 执行 cd /home/username/</h1>
<p>30 22 * * * cd /home/username/</p>
<h1 id="每月51525日的-630-执行-ls">每月5，15，25日的 6:30 执行 ls</h1>
<p>30 6 5,15,25 * * ls</p>
<h1 id="每周六周日的-2125-执行-cd-opt">每周六、周日的 21:25 执行 cd /opt/</h1>
<p>25 21 * * 6,0 cd /opt/</p>
<h1 id="每天300-至-600-之间每隔-30-分钟-执行-ls">每天3:00 至 6:00 之间每隔 30 分钟 执行 ls</h1>
<p>0,30 3-6 * * * ls</p>
<h1 id="每星期六的-2300-执行-cd-homeusername">每星期六的 23:00 执行 cd /home/username/</h1>
<p>0 23 * * 6 cd /home/username/</p>
<h1 id="每一小时-执行一次-ls">每一小时 执行一次 ls</h1>
<p>0 */1 * * * ls</p>
<h1 id="2300-至-700每隔一小时-执行-ls">23:00 至 7:00，每隔一小时 执行 ls</h1>
<p>0 23-7/1 * * * ls</p>
<h1 id="每月-7-号每周二到周五的-2300-执行-ls">每月 7 号、每周二到周五的 23:00 执行 ls</h1>
<p>0 23 4 * tue-fri ls</p>
<h1 id="1-月-1-号的-100-执行-cd-homeusername">1 月 1 号的 1:00 执行 cd /home/username/</h1>
<p>0 1 1 jan * cd /home/username/</p>
<h1 id="每个小时的第-20-分钟执行一次-ls">每个小时的第 20 分钟执行一次 ls</h1>
<p>20   *  *  *  * ls</p>
<h1 id="每天-830-执行-cd-homeusername">每天 8:30 执行 cd /home/username/</h1>
<p>30  8  *  *  * cd /home/username/</p>
<h1 id="每隔20分钟执行一次-ls">每隔20分钟执行一次 ls</h1>
<p>*/20 *  *  *  * ls</p>
<p>注：</p>
<ul>
<li>表示所有值
/ 表示“每”</li>
</ul>
<ul>
<li>表示区间范围
, 表示分割数字</li>
</ul>
<p>例如：每一分钟执行一次字符串 &ldquo;Hello World&rdquo; 打印输出到 /home/username/log.txt 文件的计划任务.</p>
<p>*/1 * * * * echo &ldquo;Hello World&rdquo; &raquo; /home/username/log.txt</p>
<p>*/1 * * * * username echo &ldquo;Hello World&rdquo; &raquo; /home/username/log.txt</p>
<p>原文：https://www.aiuai.cn/aifarm747.html</p>
</article>
                        </div>
                    </div>
                </div>
            </div>
        </main>
    </div>
</div>


  <div class="footer container-lg width-full p-responsive" role="contentinfo">
    <div
        class="position-relative d-flex flex-row-reverse flex-lg-row flex-wrap flex-lg-nowrap flex-justify-center flex-lg-justify-between pt-6 pb-2 mt-6 f6 text-gray border-top border-gray-light ">
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
            <li class="mr-3 mr-lg-0">This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.</a></li>
        </ul>

        <a aria-label="Homepage" title="STC214" class="footer-octicon d-none d-lg-block mx-lg-4"
            href="http://stc214.github.io/">
            <svg height="24" class="octicon octicon-mark-github" viewBox="0 0 16 16" version="1.1" width="24"
                aria-hidden="true">
                <path fill-rule="evenodd"
                    d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0016 8c0-4.42-3.58-8-8-8z">
                </path>
            </svg>
        </a>
        <ul
            class="list-style-none d-flex flex-wrap col-12 col-lg-5 flex-justify-center flex-lg-justify-between mb-2 mb-lg-0">
        </ul>
    </div>
    <div class="d-flex flex-justify-center pb-6">
        <span class="f6 text-gray-light"></span>
    </div>
</div>

<script crossorigin="anonymous"
    type="application/javascript" src="http://stc214.github.io/js/frameworks.js"></script>

<script crossorigin="anonymous"
    type="application/javascript" src="http://stc214.github.io/js/github-bootstrap.js"></script>
<script src="http://stc214.github.io/js/stop.js"></script>
<script src="http://stc214.github.io/js/contributions.js"></script>

</body>

</html>